{"version":3,"file":"read-time-estimate.js","sources":["../src/constants/index.js","../src/utils/image-read-time.js","../src/utils/words-read-time.js","../src/utils/strip-tags.js","../src/utils/strip-whitespace.js","../src/utils/humanize-time.js","../src/index.js"],"sourcesContent":["/* https://help.medium.com/hc/en-us/articles/214991667-Read-time */\n/* https://blog.medium.com/read-time-and-you-bc2048ab620c */\n\nconst WORDS_PER_MIN = 275; // wpm\n\nconst IMAGE_READ_TIME = 12; // in seconds\n\nconst CHINESE_KOREAN_READ_TIME = 500; // cpm\n\nconst IMAGE_TAGS = ['img', 'Image'];\n\nexport {\n  WORDS_PER_MIN,\n  IMAGE_READ_TIME,\n  CHINESE_KOREAN_READ_TIME,\n  IMAGE_TAGS,\n};\n","/**\n *  String#imageReadTime() -> { time, count }\n *\n *  Get Image Read Time from a string.\n *\n * */\nimport { IMAGE_READ_TIME, IMAGE_TAGS } from '../constants';\n\nfunction imageCount(imageTags, string) {\n  const combinedImageTags = imageTags.join('|');\n  const pattern = `<(${combinedImageTags})([\\\\w\\\\W]+?)[\\\\/]?>`;\n  const reg = new RegExp(pattern, 'g');\n  return (string.match(reg) || []).length;\n}\n\nfunction imageReadTime(customImageTime = IMAGE_READ_TIME, tags = IMAGE_TAGS, string) {\n  let seconds = 0;\n  const count = imageCount(tags, string);\n\n  if (count > 10) {\n    seconds = ((count / 2) * (customImageTime + 3)) + (count - 10) * 3; // n/2(a+b) + 3 sec/image\n  } else {\n    seconds = (count / 2) * (2 * customImageTime + (1 - count)); // n/2[2a+(n-1)d]\n  }\n  return {\n    time: seconds / 60,\n    count,\n  };\n}\n\nexport { imageCount };\nexport default imageReadTime;\n","/**\n *  String#wordsReadTime() -> { characterTime, otherLanguageTime, wordTime, wordCount }\n *\n *  Get Words count from a string.\n *\n * */\nimport { WORDS_PER_MIN, CHINESE_KOREAN_READ_TIME } from '../constants';\n\nfunction wordsCount(string) {\n  const pattern = '\\\\w+';\n  const reg = new RegExp(pattern, 'g');\n  return (string.match(reg) || []).length;\n}\n\n// Chinese / Japanese / Korean\nfunction otherLanguageReadTime(string) {\n  const pattern = '[\\u3040-\\u30ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff\\uff66-\\uff9f\\u3131-\\u314E\\u314F-\\u3163\\uAC00-\\uD7A3]';\n  const reg = new RegExp(pattern, 'g');\n  const count = (string.match(reg) || []).length;\n  const time = count / CHINESE_KOREAN_READ_TIME;\n  const formattedString = string.replace(reg, '');\n  return {\n    count,\n    time,\n    formattedString,\n  };\n}\n\nfunction wordsReadTime(string, wordsPerMin = WORDS_PER_MIN) {\n  const {\n    count: characterCount,\n    time: otherLanguageTime,\n    formattedString,\n  } = otherLanguageReadTime(string);\n  const wordCount = wordsCount(formattedString);\n  const wordTime = wordCount / wordsPerMin;\n  return {\n    characterCount,\n    otherLanguageTime,\n    wordTime,\n    wordCount,\n  };\n}\n\nexport { wordsCount, otherLanguageReadTime };\nexport default wordsReadTime;\n","/**\n *  String#stripTags() -> String\n *\n *  Strip HTML tags string.\n *\n * */\n\nfunction stripTags(string) {\n  const pattern = '<\\\\w+(\\\\s+(\"[^\"]*\"|\\\\\\'[^\\\\\\']*\\'|[^>])+)?>|<\\\\/\\\\w+>';\n  const reg = new RegExp(pattern, 'gi');\n  return string.replace(reg, '');\n}\n\nexport default stripTags;\n","/**\n *  String#stripWhitespace() -> String\n *\n *  Strip HTML tags string.\n *\n * */\n\nfunction stripWhitespace(string) {\n  return string.replace(/^\\s+/, '').replace(/\\s+$/, '');\n}\n\nexport default stripWhitespace;\n","/**\n *  String#humanizeTime() -> String\n *\n *  Convert time(in minutes) to a humanized string.\n *\n * */\n\nfunction humanizeTime(time, language) {\n  language = (typeof language !== 'undefined') ?  language : 'ko';\n  if (time < 0.5) {\n    return language === 'ko' ? '1분 미만' : 'Less than a minute';\n  } if (time >= 0.5 && time < 1.5) {\n    return language === 'ko' ? '1분' : '1 minute';\n  }\n  return language === 'ko' ? `${Math.ceil(time)} 분` : `${Math.ceil(time)} minutes`;\n}\n\n\nexport default humanizeTime;\n","import imageReadTime from './utils/image-read-time';\nimport wordsReadTime from './utils/words-read-time';\nimport stripTags from './utils/strip-tags';\nimport stripWhitespace from './utils/strip-whitespace';\nimport humanizeTime from './utils/humanize-time';\n\n\nfunction readTime(\n  string,\n  customWordTime,\n  customImageTime,\n  chineseKoreanReadTime,\n  imageTags,\n  language\n) {\n  const { time: imageTime, count: imageCount } = imageReadTime(customImageTime, imageTags, string);\n  const strippedString = stripTags(stripWhitespace(string));\n  const {\n    characterCount,\n    otherLanguageTime,\n    wordTime,\n    wordCount,\n  } = wordsReadTime(strippedString, customWordTime);\n  return {\n    humanizedDuration: humanizeTime(imageTime + wordTime, language),\n    duration: imageTime + wordTime,\n    totalWords: wordCount,\n    wordTime,\n    totalImages: imageCount,\n    imageTime,\n    otherLanguageTimeCharacters: characterCount,\n    otherLanguageTime,\n  };\n}\n\nexport default readTime;\n"],"names":["WORDS_PER_MIN","IMAGE_READ_TIME","CHINESE_KOREAN_READ_TIME","IMAGE_TAGS","imageCount","imageTags","string","combinedImageTags","join","pattern","reg","RegExp","match","length","imageReadTime","customImageTime","tags","seconds","count","time","wordsCount","otherLanguageReadTime","formattedString","replace","wordsReadTime","wordsPerMin","characterCount","otherLanguageTime","wordCount","wordTime","stripTags","stripWhitespace","humanizeTime","language","Math","ceil","readTime","customWordTime","chineseKoreanReadTime","imageTime","strippedString","humanizedDuration","duration","totalWords","totalImages","otherLanguageTimeCharacters"],"mappings":"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"}