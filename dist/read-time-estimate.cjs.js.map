{"version":3,"file":"read-time-estimate.cjs.js","sources":["../src/constants/index.js","../src/utils/image-read-time.js","../src/utils/words-read-time.js","../src/utils/strip-tags.js","../src/utils/strip-whitespace.js","../src/utils/humanize-time.js","../src/index.js"],"sourcesContent":["/* https://help.medium.com/hc/en-us/articles/214991667-Read-time */\n/* https://blog.medium.com/read-time-and-you-bc2048ab620c */\n\nconst WORDS_PER_MIN = 275; // wpm\n\nconst IMAGE_READ_TIME = 12; // in seconds\n\nconst CHINESE_KOREAN_READ_TIME = 500; // cpm\n\nconst IMAGE_TAGS = ['img', 'Image'];\n\nexport {\n  WORDS_PER_MIN,\n  IMAGE_READ_TIME,\n  CHINESE_KOREAN_READ_TIME,\n  IMAGE_TAGS,\n};\n","/**\n *  String#imageReadTime() -> { time, count }\n *\n *  Get Image Read Time from a string.\n *\n * */\nimport { IMAGE_READ_TIME, IMAGE_TAGS } from '../constants';\n\nfunction imageCount(imageTags, string) {\n  const combinedImageTags = imageTags.join('|');\n  const pattern = `<(${combinedImageTags})([\\\\w\\\\W]+?)[\\\\/]?>`;\n  const reg = new RegExp(pattern, 'g');\n  return (string.match(reg) || []).length;\n}\n\nfunction imageReadTime(customImageTime = IMAGE_READ_TIME, tags = IMAGE_TAGS, string) {\n  let seconds = 0;\n  const count = imageCount(tags, string);\n\n  if (count > 10) {\n    seconds = ((count / 2) * (customImageTime + 3)) + (count - 10) * 3; // n/2(a+b) + 3 sec/image\n  } else {\n    seconds = (count / 2) * (2 * customImageTime + (1 - count)); // n/2[2a+(n-1)d]\n  }\n  return {\n    time: seconds / 60,\n    count,\n  };\n}\n\nexport { imageCount };\nexport default imageReadTime;\n","/**\n *  String#wordsReadTime() -> { characterTime, otherLanguageTime, wordTime, wordCount }\n *\n *  Get Words count from a string.\n *\n * */\nimport { WORDS_PER_MIN, CHINESE_KOREAN_READ_TIME } from '../constants';\n\nfunction wordsCount(string) {\n  const pattern = '\\\\w+';\n  const reg = new RegExp(pattern, 'g');\n  return (string.match(reg) || []).length;\n}\n\n// Chinese / Japanese / Korean\nfunction otherLanguageReadTime(string) {\n  const pattern = '[\\u3040-\\u30ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff\\uff66-\\uff9f\\u3131-\\u314E\\u314F-\\u3163\\uAC00-\\uD7A3]';\n  const reg = new RegExp(pattern, 'g');\n  const count = (string.match(reg) || []).length;\n  const time = count / CHINESE_KOREAN_READ_TIME;\n  const formattedString = string.replace(reg, '');\n  return {\n    count,\n    time,\n    formattedString,\n  };\n}\n\nfunction wordsReadTime(string, wordsPerMin = WORDS_PER_MIN) {\n  const {\n    count: characterCount,\n    time: otherLanguageTime,\n    formattedString,\n  } = otherLanguageReadTime(string);\n  const wordCount = wordsCount(formattedString);\n  const wordTime = wordCount / wordsPerMin;\n  return {\n    characterCount,\n    otherLanguageTime,\n    wordTime,\n    wordCount,\n  };\n}\n\nexport { wordsCount, otherLanguageReadTime };\nexport default wordsReadTime;\n","/**\n *  String#stripTags() -> String\n *\n *  Strip HTML tags string.\n *\n * */\n\nfunction stripTags(string) {\n  const pattern = '<\\\\w+(\\\\s+(\"[^\"]*\"|\\\\\\'[^\\\\\\']*\\'|[^>])+)?>|<\\\\/\\\\w+>';\n  const reg = new RegExp(pattern, 'gi');\n  return string.replace(reg, '');\n}\n\nexport default stripTags;\n","/**\n *  String#stripWhitespace() -> String\n *\n *  Strip HTML tags string.\n *\n * */\n\nfunction stripWhitespace(string) {\n  return string.replace(/^\\s+/, '').replace(/\\s+$/, '');\n}\n\nexport default stripWhitespace;\n","/**\n *  String#humanizeTime() -> String\n *\n *  Convert time(in minutes) to a humanized string.\n *\n * */\n\nfunction humanizeTime(time, language) {\n  language = (typeof language !== 'undefined') ?  language : 'ko';\n  if (time < 0.5) {\n    return language === 'ko' ? '1분 미만' : 'Less than a minute';\n  } if (time >= 0.5 && time < 1.5) {\n    return language === 'ko' ? '1분' : '1 minute';\n  }\n  return language === 'ko' ? `${Math.ceil(time)} 분` : `${Math.ceil(time)} minutes`;\n}\n\n\nexport default humanizeTime;\n","import imageReadTime from './utils/image-read-time';\nimport wordsReadTime from './utils/words-read-time';\nimport stripTags from './utils/strip-tags';\nimport stripWhitespace from './utils/strip-whitespace';\nimport humanizeTime from './utils/humanize-time';\n\n\nfunction readTime(\n  string,\n  customWordTime,\n  customImageTime,\n  chineseKoreanReadTime,\n  imageTags,\n  language\n) {\n  const { time: imageTime, count: imageCount } = imageReadTime(customImageTime, imageTags, string);\n  const strippedString = stripTags(stripWhitespace(string));\n  const {\n    characterCount,\n    otherLanguageTime,\n    wordTime,\n    wordCount,\n  } = wordsReadTime(strippedString, customWordTime);\n  return {\n    humanizedDuration: humanizeTime(imageTime + otherLanguageTime, language),\n    duration: imageTime + wordTime,\n    totalWords: wordCount,\n    wordTime,\n    totalImages: imageCount,\n    imageTime,\n    otherLanguageTimeCharacters: characterCount,\n    otherLanguageTime,\n  };\n}\n\nexport default readTime;\n"],"names":["WORDS_PER_MIN","IMAGE_READ_TIME","CHINESE_KOREAN_READ_TIME","IMAGE_TAGS","imageCount","imageTags","string","combinedImageTags","join","pattern","reg","RegExp","match","length","imageReadTime","customImageTime","tags","seconds","count","time","wordsCount","otherLanguageReadTime","formattedString","replace","wordsReadTime","wordsPerMin","characterCount","otherLanguageTime","wordCount","wordTime","stripTags","stripWhitespace","humanizeTime","language","Math","ceil","readTime","customWordTime","chineseKoreanReadTime","imageTime","strippedString","humanizedDuration","duration","totalWords","totalImages","otherLanguageTimeCharacters"],"mappings":"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"}